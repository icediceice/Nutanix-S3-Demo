<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NKP Gallery — Nutanix S3 Demo</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

  <!-- Pod Identity Banner -->
  <div class="pod-banner" id="podBanner" style="background-color: {{ pod.color }}">
    <div class="pod-banner-inner">
      <span class="pod-status" id="podStatus">
        <span class="status-dot status-dot--checking" id="statusDot"></span>
        <span id="statusText">Checking S3...</span>
      </span>
      <span class="pod-hostname">Pod: <strong>{{ pod.hostname }}</strong></span>
    </div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <div class="header-left">
        <h1 class="app-title">NKP Gallery</h1>
        <p class="app-subtitle">Nutanix Kubernetes Platform + Unified Storage Demo</p>
      </div>
      <div class="header-right">
        <button class="btn-upload" id="btnUpload">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          Upload Images
        </button>
      </div>
    </div>
  </header>

  <!-- Stats Bar -->
  <section class="stats-bar">
    <div class="stats-bar-inner">
      <div class="stat-card">
        <div class="stat-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
        </div>
        <div class="stat-content">
          <span class="stat-label">Images</span>
          <span class="stat-value" id="statCount">—</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/></svg>
        </div>
        <div class="stat-content">
          <span class="stat-label">Bucket</span>
          <span class="stat-value" id="statBucket">{{ bucket }}</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
        </div>
        <div class="stat-content">
          <span class="stat-label">S3 Endpoint</span>
          <span class="stat-value stat-value--small" id="statEndpoint" title="{{ endpoint }}">{{ endpoint }}</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="8" rx="2"/><rect x="2" y="14" width="20" height="8" rx="2"/><circle cx="6" cy="6" r="1"/><circle cx="6" cy="18" r="1"/></svg>
        </div>
        <div class="stat-content">
          <span class="stat-label">Pod</span>
          <span class="stat-value stat-value--small" id="statPod">{{ pod.hostname }}</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Gallery -->
  <main class="gallery-container">
    <div class="gallery-grid" id="galleryGrid">
      <!-- Skeleton loaders -->
      <div class="skeleton-card"></div>
      <div class="skeleton-card"></div>
      <div class="skeleton-card"></div>
      <div class="skeleton-card"></div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" id="emptyState" style="display:none">
      <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#A0A0B8" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
      <h2>No images yet</h2>
      <p>Upload your first image to get started</p>
      <button class="btn-upload btn-upload--secondary" id="btnUploadEmpty">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
        Upload Images
      </button>
    </div>
  </main>

  <!-- Upload Modal -->
  <div class="modal-overlay" id="uploadModal">
    <div class="modal">
      <div class="modal-header">
        <h2>Upload Images</h2>
        <button class="modal-close" id="modalClose">&times;</button>
      </div>
      <div class="drop-zone" id="dropZone">
        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#1FDDE9" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
        <p>Drag & drop images here</p>
        <span class="drop-zone-hint">or click to browse</span>
        <span class="drop-zone-formats">JPG, PNG, GIF, WEBP &mdash; max {{ config.get('MAX_FILE_SIZE', 10) }}MB</span>
        <input type="file" id="fileInput" multiple accept=".jpg,.jpeg,.png,.gif,.webp" hidden>
      </div>
      <div class="upload-progress" id="uploadProgress" style="display:none">
        <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
        <span class="progress-text" id="progressText">Uploading...</span>
      </div>
      <div class="upload-results" id="uploadResults" style="display:none"></div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-inner">
      <span>Powered by <strong>Nutanix Kubernetes Platform</strong> + <strong>Nutanix Unified Storage</strong></span>
      <span class="footer-arch">Container &harr; S3 API &harr; NUS Object Store</span>
    </div>
  </footer>

  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
